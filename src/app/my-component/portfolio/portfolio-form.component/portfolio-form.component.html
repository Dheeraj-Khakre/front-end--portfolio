<!-- src/app/portfolio/portfolio-form/portfolio-form.component.html -->
<div class="container mt-4">
  <mat-card>
    <mat-card-title>
      {{ isEdit ? 'Edit Portfolio' : 'Create Portfolio' }}
    </mat-card-title>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="submit()">

        <mat-form-field appearance="fill" class="w-100 mb-2">
          <mat-label>Portfolio name</mat-label>
          <input matInput formControlName="name" placeholder="e.g. Retirement Fund">
          <mat-error *ngIf="form.controls['name'].hasError('required')">
            Name is required
          </mat-error>
          <mat-error *ngIf="form.controls['name'].hasError('maxlength')">
            Maximum 100 characters
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="w-100 mb-2">
          <mat-label>Description</mat-label>
          <textarea matInput rows="4" formControlName="description" placeholder="Optional description"></textarea>
          <mat-error *ngIf="form.controls['description'].hasError('maxlength')">
            Maximum 500 characters
          </mat-error>
        </mat-form-field>

        <div class="d-flex gap-2">
          <button mat-raised-button color="primary" type="submit" [disabled]="saving">
            {{ isEdit ? 'Save' : 'Create' }}
            <mat-progress-spinner *ngIf="saving" mode="indeterminate" diameter="18"></mat-progress-spinner>
          </button>

          <button mat-stroked-button type="button" (click)="cancel()" [disabled]="saving">
            Cancel
          </button>

          <span class="flex-spacer"></span>

          <button *ngIf="isEdit" mat-flat-button color="warn" type="button" (click)="deletePortfolio()" [disabled]="saving">
            Delete
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>

  <div *ngIf="loading" class="text-center mt-3">
    <mat-progress-spinner mode="indeterminate" diameter="36"></mat-progress-spinner>
  </div>
</div>
